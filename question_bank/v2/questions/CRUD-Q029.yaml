schema_version: '2.0'
id: CRUD-Q029
title: Add extra credit to multiple classes using updateMany
topic: CRUD
subtopic: updateMany with $in and $push
difficulty: medium
type: single
tags:
- updateMany
- $in
- $push
- arrays
- exam
exam_relevance:
  pool: exam
  confidence: high
prompt: 'Three computer science classes, with the class_ids of 377, 259, and 350, have earned 100 extra credit points
  by competing in a hackathon. You need to update the database so that all students who are in these classes receive
  extra credit points. Which of the following queries will accomplish this goal? (Select one.)

  '
context: 'You are using the `grades` collection in the `sample_training` database.

  '
artifacts:
  sample_docs:
  - _id: ObjectId('5f6a...')
    class_id: 377
    scores:
    - type: exam
      score: 80
  notes:
  - Multiple documents must be updated.
  - Extra credit is stored inside the scores array.
choices:
- key: A
  text: "db.grades.insertMany(\n  {\n    class_id: { $in: [377, 259, 350] }\n  },\n  {\n    $push: {\n      scores:\
    \ { type: \"extra credit\", score: 100 }\n    }\n  }\n)\n"
- key: B
  text: "db.grades.updateMany(\n  {\n    class_id: { $in: [377, 259, 350] }\n  },\n  {\n    $push: {\n      scores:\
    \ { type: \"extra credit\", score: 100 }\n    }\n  }\n)\n"
- key: C
  text: "db.grades.updateOne(\n  {\n    class_id: { $in: [377, 259, 350] }\n  },\n  {\n    $push: {\n      scores:\
    \ { type: \"extra credit\", score: 100 }\n    }\n  }\n)\n"
- key: D
  text: "db.grades.findAndModify(\n  {\n    class_id: { $in: [377, 259, 350] }\n  },\n  {\n    $push: {\n      scores:\
    \ { type: \"extra credit\", score: 100 }\n    }\n  }\n)\n"
answer:
  keys:
  - B
rationale:
  rule: 'Use updateMany() when multiple documents must be modified.

    '
  correct_why:
  - updateMany() updates all matching documents.
  - $in matches all specified class IDs.
  - $push correctly appends a new object to the scores array.
  wrong_why:
    A: insertMany() inserts new documents instead of updating existing ones.
    C: updateOne() updates only a single matching document.
    D: findAndModify() modifies only one document at a time.
  trap: 'Confusing updateOne() or findAndModify() with updateMany() when bulk updates are required.

    '
  mini_demo: "db.grades.updateMany(\n  { class_id: { $in: [377, 259, 350] } },\n  { $push: { scores: { type: \"\
    extra credit\", score: 100 } } }\n)\n"
status: published
author: prashanth
updated_at: '2025-12-13'
